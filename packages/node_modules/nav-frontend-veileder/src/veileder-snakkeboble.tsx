import * as React from 'react';
import * as PT from 'prop-types';
import { StatelessComponent } from 'react';

export interface VeilederSnakkebobleProps {
    sier: React.ReactNode | React.ReactChild | React.ReactChildren;
    offset: number;
};

const VeilederSnakkeboble: StatelessComponent<VeilederSnakkebobleProps> = props => {
    const { sier, offset } = props;

    const scaleMultiplier = Math.max(0.5, offset / 150);

    const bubbleStyles = {
        bottom: offset + ((20 * scaleMultiplier) / 2),
        marginRight: offset / 2
    };

    const arrowStyles = {
        bottom: Math.ceil(-20 - (((20 * scaleMultiplier) / 2) - 10)),
        right: ((20 - (20 * scaleMultiplier)) * -1) + (20 * scaleMultiplier),
        transform: `scale(${scaleMultiplier})`
    };

    return (
        <div className="veileder__snakkeboble" style={bubbleStyles}>
            {sier}
            <i className="veileder__snakkeboblePil" style={arrowStyles} />
        </div>
    );
};

(VeilederSnakkeboble as any).propTypes = {
    sier: PT.node.isRequired,
    offset: PT.number.isRequired
};

export default VeilederSnakkeboble;
