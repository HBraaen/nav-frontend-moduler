import * as React from 'react';
import * as PT from 'prop-types';
import { omit } from 'nav-frontend-js-utils';
import Textarea from './textarea';

export interface TextareaControlledProps {
    defaultValue?: string;
}

class TextareaControlled extends React.Component {
    constructor(props) {
        super(props);
        this.state = { text: props.defaultValue || '' };
        this.onChange = this.onChange.bind(this);
    }

    onChange(e) {
        this.setState({ text: e.target.value });
    }

    render() {
        return <Textarea onChange={this.onChange} value={this.state.text} {...this.props} />;
    }
}

(TextareaControlled as React.ComponentClass).propTypes = {
    ...omit(Textarea.propTypes, 'value', 'onChange'),
    defaultValue: PT.string
};
(TextareaControlled as React.ComponentClass).defaultProps = omit(Textarea.defaultProps, 'value', 'onChange');

export default TextareaControlled;
